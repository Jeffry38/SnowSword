(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24517eef"],{"14c3":function(e,t,n){var o=n("c6b6"),l=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var s=n.call(e,t);if("object"!==typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==o(e))throw TypeError("RegExp#exec called on incompatible receiver");return l.call(e,t)}},"466d":function(e,t,n){"use strict";var o=n("d784"),l=n("825a"),s=n("50c4"),r=n("1d80"),i=n("8aa5"),c=n("14c3");o("match",1,(function(e,t,n){return[function(t){var n=r(this),o=void 0==t?void 0:t[e];return void 0!==o?o.call(t,n):new RegExp(t)[e](String(n))},function(e){var o=n(t,e,this);if(o.done)return o.value;var r=l(e),a=String(this);if(!r.global)return c(r,a);var u=r.unicode;r.lastIndex=0;var h,d=[],b=0;while(null!==(h=c(r,a))){var m=String(h[0]);d[b]=m,""===m&&(r.lastIndex=i(a,s(r.lastIndex),u)),b++}return 0===b?null:d}]}))},"8aa5":function(e,t,n){"use strict";var o=n("6547").charAt;e.exports=function(e,t,n){return t+(n?o(e,t).length:1)}},9406:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-main",[n("el-table",{staticStyle:{width:"100%"},attrs:{border:"",resizable:"",data:e.webshells,"highlight-current-row":""},on:{"row-contextmenu":e.webshellRightClick}},[n("el-table-column",{attrs:{property:"url",label:"URL地址"}}),n("el-table-column",{attrs:{property:"info.ip_address",label:"IP地址",width:"130px"}}),n("el-table-column",{attrs:{property:"info.address",label:"物理位置"}}),n("el-table-column",{attrs:{property:"note",label:"网站备注"}}),n("el-table-column",{attrs:{property:"create_time",label:"创建时间",width:"160px"}}),n("el-table-column",{attrs:{property:"update_time",width:"160px",label:"更新时间"}}),n("template",{slot:"empty"},[n("el-button",{attrs:{size:"mini",icon:"el-icon-plus",circle:""},on:{click:function(t){return e.addWebshell(!1)}}})],1)],2)],1),n("el-aside",{attrs:{width:"200px"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.categories,"highlight-current-row":""},on:{"row-click":e.changeCategory,"row-contextmenu":e.categoryRightClick}},[n("el-table-column",{attrs:{label:"分类"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-folder"}),n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.name))]),e._v(" "),n("el-tag",{staticStyle:{float:"right"},attrs:{size:"mini"}},[e._v(e._s(t.row.webshellCount))])]}}])})],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.contextMenu.webshell.visible,expression:"contextMenu.webshell.visible"}]},[n("ul",{staticClass:"contextmenu",style:{left:e.contextMenu.webshell.left+"px",top:e.contextMenu.webshell.top+"px"},attrs:{id:"webshellContextMenu"}},[n("li",{staticClass:"el-icon-tickets",on:{click:function(t){return e.openOverview()}}},[e._v(" 信息概览 ")]),n("br"),n("li",{staticClass:"el-icon-monitor",on:{click:function(t){return e.openTerminal()}}},[e._v(" 虚拟终端 ")]),n("br"),n("li",{staticClass:"el-icon-files",on:{click:function(t){return e.openFilemanager()}}},[e._v(" 文件管理 ")]),n("br"),n("li",{staticClass:"el-icon-coin",on:{click:function(t){return e.openDatabase()}}},[e._v(" 数据操作 ")]),n("br"),n("li",{staticClass:"el-icon-view",on:{click:e.openWebsite}},[e._v(" 浏览网站 ")]),n("br"),n("br"),n("li",{staticClass:"el-icon-document-add",on:{click:function(t){return e.addWebshell(!1)}}},[e._v(" 添加数据 ")]),n("br"),n("li",{staticClass:"el-icon-edit",on:{click:function(t){return e.updateWebshell(!1)}}},[e._v(" 编辑数据 ")]),n("br"),n("li",{staticClass:"el-icon-delete",on:{click:e.deleteWebshell}},[e._v(" 删除数据 ")]),n("br"),n("br"),n("li",{staticClass:"el-icon-folder-checked",on:{click:function(t){return e.addToCategory(!1)}}},[e._v(" 设置分类 ")]),n("br"),n("li",{staticClass:"el-icon-folder-delete",on:{click:e.removeFromCategory}},[e._v(" 移出分类 ")])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.contextMenu.category.visible,expression:"contextMenu.category.visible"}]},[n("ul",{staticClass:"contextmenu",style:{left:e.contextMenu.category.left+"px",top:e.contextMenu.category.top+"px"},attrs:{id:"categoryContextMenu"}},[n("li",{staticClass:"el-icon-edit",on:{click:e.renameCategory}},[e._v(" 重命名 ")]),n("br"),n("li",{staticClass:"el-icon-folder-add",on:{click:e.addCategory}},[e._v(" 添加分类 ")]),n("br"),n("li",{staticClass:"el-icon-delete",on:{click:e.deleteCategory}},[e._v(" 删除分类 ")])])]),n("el-dialog",{attrs:{title:e.webshellForm.title,visible:e.webshellForm.visible},on:{"update:visible":function(t){return e.$set(e.webshellForm,"visible",t)}}},[n("el-form",{attrs:{model:e.webshellForm}},[n("el-form-item",{attrs:{label:"URL地址","label-width":"120px",required:""}},[n("el-input",{staticStyle:{width:"90%"},attrs:{autocomplete:"off"},model:{value:e.webshellForm.url,callback:function(t){e.$set(e.webshellForm,"url",t)},expression:"webshellForm.url"}})],1),n("el-form-item",{attrs:{label:"连接密码","label-width":"120px",required:""}},[n("el-input",{staticStyle:{width:"90%"},attrs:{autocomplete:"off","show-password":""},model:{value:e.webshellForm.password,callback:function(t){e.$set(e.webshellForm,"password",t)},expression:"webshellForm.password"}})],1),n("el-form-item",{attrs:{label:"网站备注","label-width":"120px"}},[n("el-input",{staticStyle:{width:"90%"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.webshellForm.note,callback:function(t){e.$set(e.webshellForm,"note",t)},expression:"webshellForm.note"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{icon:"el-icon-connection"},on:{click:e.testConnection}},[e._v("测试连接")]),n("el-button",{on:{click:function(t){e.webshellForm.visible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOrUpdateWebshell()}}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"设置分类",visible:e.categoryForm.visible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.categoryForm,"visible",t)}}},[n("el-form",{attrs:{model:e.categoryForm}},[n("el-form-item",{attrs:{label:"分类名",required:""}},[n("el-select",{staticStyle:{width:"85%"},attrs:{placeholder:"请选择"},model:{value:e.categoryForm.categoryId,callback:function(t){e.$set(e.categoryForm,"categoryId",t)},expression:"categoryForm.categoryId"}},e._l(e.categories,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.categoryForm.visible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addToCategory(!0)}}},[e._v("确 定")])],1)],1)],1)},l=[],s=(n("ac1f"),n("466d"),n("b775")),r=n("5c96"),i={data:function(){return{contextMenu:{webshell:{visible:!1,top:0,left:0,currentId:0,current:null,height:0},category:{visible:!1,top:0,left:0,currentId:0,current:null,height:0}},webshells:[],categories:[],currentCategoryId:0,webshellForm:{visible:!1,title:"",isUpdate:!1,url:"",password:"",note:""},categoryForm:{visible:!1,categoryId:0}}},methods:{categoryRightClick:function(e,t,n){n.preventDefault(),this.closeMenu();var o=this.$el.getBoundingClientRect().left,l=n.clientX-o;this.contextMenu.category.left=l,document.body.scrollHeight-n.pageY<this.contextMenu.category.height?this.contextMenu.category.top=document.body.scrollHeight-this.contextMenu.category.height-70:this.contextMenu.category.top=n.pageY-60,this.contextMenu.category.visible=!0,this.contextMenu.category.currentId=e.id,this.contextMenu.category.current=e,document.body.addEventListener("click",this.closeMenu)},webshellRightClick:function(e,t,n){n.preventDefault(),this.closeMenu();var o=this.$el.getBoundingClientRect().left,l=n.clientX-o;this.contextMenu.webshell.left=l,document.body.scrollHeight-n.pageY<this.contextMenu.webshell.height?this.contextMenu.webshell.top=document.body.scrollHeight-this.contextMenu.webshell.height-70:this.contextMenu.webshell.top=n.pageY-60,this.contextMenu.webshell.visible=!0,this.contextMenu.webshell.currentId=e.id,this.contextMenu.webshell.current=e,document.body.addEventListener("click",this.closeMenu)},closeMenu:function(){this.contextMenu.webshell.visible=!1,this.contextMenu.category.visible=!1,document.body.removeEventListener("click",this.closeMenu)},fetchWebshellData:function(e){var t=this;e?Object(s["a"])({url:"/webshell/getByCategoryId",method:"get",params:{categoryId:e}}).then((function(e){t.webshells=e.data})).catch((function(e){console.log(e)})):Object(s["a"])({url:"/webshell/findAll",method:"get"}).then((function(e){t.webshells=e.data})).catch((function(e){console.log(e)}))},fetchCategoryData:function(){var e=this;Object(s["a"])({url:"/category/findAll",method:"get"}).then((function(t){e.categories=t.data})).catch((function(e){console.log(e)}))},changeCategory:function(e){this.fetchWebshellData(e.id),this.currentCategoryId=e.id},renameCategory:function(){var e=this;this.$prompt("请输入分类名",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(t){var n=t.value;Object(s["a"])({url:"/category/renameById",method:"get",params:{categoryId:e.contextMenu.category.currentId,categoryName:n}}).then((function(t){e.$message({type:"success",message:"修改成功"}),e.refreshData()})).catch((function(e){console.log(e)}))})).catch((function(){e.$message({type:"info",message:"取消输入"})}))},refreshData:function(){this.fetchCategoryData(),this.fetchWebshellData(this.currentCategoryId)},addCategory:function(){var e=this;this.$prompt("请输入分类名",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(t){var n=t.value;Object(s["a"])({url:"/category/add",method:"post",data:{name:n}}).then((function(t){e.$message({type:"success",message:"添加成功"}),e.refreshData()})).catch((function(e){console.log(e)}))})).catch((function(){e.$message({type:"info",message:"取消输入"})}))},deleteCategory:function(){var e=this;this.$confirm("此操作将永久删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["a"])({url:"/category/deleteById",method:"get",params:{id:e.contextMenu.category.currentId}}).then((function(t){e.$message({type:"success",message:"删除成功"}),e.currentCategoryId==e.contextMenu.category.currentId&&(e.currentCategoryId=0),e.refreshData()})).catch((function(e){console.log(e)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},openWebsite:function(){var e=this.contextMenu.webshell.current.url,t=/https?:\/\/.*?\//,n=e.match(t)[0];window.open(n,"_blank")},addOrUpdateWebshell:function(){this.webshellForm.isUpdate?this.updateWebshell(!0):this.addWebshell(!0)},addWebshell:function(e){var t=this;if(e){var n=r["Loading"].service();Object(s["a"])({url:"/webshell/add",method:"post",data:{url:this.webshellForm.url,password:this.webshellForm.password,note:this.webshellForm.note}}).then((function(e){var o=e.data.id,l=t.currentCategoryId;l?Object(s["a"])({url:"/category/addWebshellById",method:"get",params:{webshellId:o,categoryId:l}}).then((function(e){t.$message({type:"success",message:"添加成功"}),t.webshellForm.visible=!1,t.refreshData(),n.close()})).catch((function(e){console.log(e),n.close()})):(t.$message({type:"success",message:"添加成功"}),t.webshellForm.visible=!1,t.refreshData(),n.close())})).catch((function(e){n.close(),console.log(e)}))}else this.webshellForm.title="添加数据",this.webshellForm.isUpdate=!1,this.webshellForm.url="",this.webshellForm.password="",this.webshellForm.note="",this.webshellForm.visible=!0},updateWebshell:function(e){var t=this;if(e){var n=r["Loading"].service();Object(s["a"])({url:"/webshell/update",method:"post",data:{id:this.contextMenu.webshell.current.id,url:this.webshellForm.url,password:this.webshellForm.password,note:this.webshellForm.note}}).then((function(e){n.close(),t.$message({type:"success",message:"更新成功"}),t.webshellForm.visible=!1,t.refreshData()})).catch((function(e){n.close(),console.log(e)}))}else this.webshellForm.title="编辑数据",this.webshellForm.isUpdate=!0,this.webshellForm.url=this.contextMenu.webshell.current.url,this.webshellForm.password=this.contextMenu.webshell.current.password,this.webshellForm.note=this.contextMenu.webshell.current.note,this.webshellForm.visible=!0},deleteWebshell:function(){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["a"])({url:"/webshell/deleteById",method:"get",params:{id:e.contextMenu.webshell.current.id}}).then((function(t){e.$message({type:"success",message:"删除成功"}),e.refreshData()})).catch((function(e){console.log(e)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},addToCategory:function(e){var t=this;if(e){var n=this.categoryForm.categoryId,o=this.contextMenu.webshell.current.id;if(!n)return void(this.categoryForm.visible=!1);Object(s["a"])({url:"/category/addWebshellById",method:"get",params:{webshellId:o,categoryId:n}}).then((function(e){t.$message({type:"success",message:"设置成功"}),t.categoryForm.visible=!1,t.refreshData()})).catch((function(e){console.log(e)}))}else this.categoryForm.visible=!0},removeFromCategory:function(){var e=this,t=this.currentCategoryId,n=this.contextMenu.webshell.current.id;t?Object(s["a"])({url:"/category/removeWebshellById",method:"get",params:{webshellId:n,categoryId:t}}).then((function(t){e.$message({type:"success",message:"移出成功"}),e.refreshData()})).catch((function(e){console.log(e)})):this.$message({type:"warning",message:'不能从"全部数据"分类中移出'})},testConnection:function(){var e=this;Object(s["a"])({url:"/webshell/testConnection",method:"post",data:{url:this.webshellForm.url,password:this.webshellForm.password}}).then((function(t){t.data?e.$message({type:"success",message:"连接成功"}):e.$message({type:"error",message:"连接失败"})})).catch((function(e){console.log(e)}))},openOverview:function(){this.$router.push({name:"Overview",params:{id:this.contextMenu.webshell.current.id}})},openTerminal:function(){this.$router.push({name:"Terminal",params:{id:this.contextMenu.webshell.current.id}})},openDatabase:function(){this.$router.push({name:"Database",params:{id:this.contextMenu.webshell.current.id}})},openFilemanager:function(){this.$router.push({name:"FileManager",params:{id:this.contextMenu.webshell.current.id}})}},created:function(){this.fetchWebshellData(),this.fetchCategoryData(),this.contextMenu.webshell.visible=!0,this.contextMenu.category.visible=!0},mounted:function(){this.contextMenu.webshell.height=document.getElementById("webshellContextMenu").clientHeight,this.contextMenu.category.height=document.getElementById("categoryContextMenu").clientHeight,this.contextMenu.webshell.visible=!1,this.contextMenu.category.visible=!1}},c=i,a=(n("f8a7"),n("2877")),u=Object(a["a"])(c,o,l,!1,null,null,null);t["default"]=u.exports},ca2b:function(e,t,n){},d784:function(e,t,n){"use strict";n("ac1f");var o=n("6eeb"),l=n("d039"),s=n("b622"),r=n("9263"),i=n("9112"),c=s("species"),a=!l((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),h=s("replace"),d=function(){return!!/./[h]&&""===/./[h]("a","$0")}(),b=!l((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,h){var m=s(e),g=!l((function(){var t={};return t[m]=function(){return 7},7!=""[e](t)})),f=g&&!l((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[m]=/./[m]),n.exec=function(){return t=!0,null},n[m](""),!t}));if(!g||!f||"replace"===e&&(!a||!u||d)||"split"===e&&!b){var p=/./[m],w=n(m,""[e],(function(e,t,n,o,l){return t.exec===r?g&&!l?{done:!0,value:p.call(t,n,o)}:{done:!0,value:e.call(n,t,o)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=w[0],v=w[1];o(String.prototype,e,y),o(RegExp.prototype,m,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}h&&i(RegExp.prototype[m],"sham",!0)}},f8a7:function(e,t,n){"use strict";n("ca2b")}}]);